= MediaWiki release notes =

Security reminder: MediaWiki does not require PHP's register_globals
setting since version 1.2.0. If you have it on, turn it *off* if you can.

*************************************************************************
*									*
*	MediaWiki 1.5beta4 CVS special edition EnotifWiki 3.49		*
*									*
*	Experimental version which includes WYSIWYG FCKeditor 2.0 FC	*
*	for pages having __USE_EDITOR__ on it				*
*									*
*************************************************************************
*************************************************************************
*									*
*	CVS REL1_5 as on 17.08.2005 23:45 UTC 				*
*	AutoLogin v1.1							*
*									*
* 	(C) T. Gries 08.2005						*
*									*
*	Enotif adds e-mail notification to MediaWiki and		*
*	sends customized e-mails to watching users			*
*									*
* 	when a								*
*									*
*    		- watch-listed page or					*
*    		- user_talk page is changed or				*
*    		- a new page is created					*
*									*
*  	http://bugzilla.wikipedia.org/show_bug.cgi?id=454		*
*									*
*  	Visit the complete documentation on				*
*	http://meta.wikipedia.org/Enotif				*
*  	and see section in the release notes below			*
*									*
*************************************************************************

== MediaWiki 1.5 beta 4 ==

July 30, 2005

MediaWiki 1.5 beta 4 is a preview release of the new 1.5 release series.
A number of bugs have been fixed since beta 3; see the full changelist below.


== MediaWiki 1.5 beta 3 ==

July 7, 2005

MediaWiki 1.5 beta 3 is a preview release of the new 1.5 release
series, with a security update over beta 2.

Incorrect escaping of a parameter in the page move template could
be used to inject JavaScript code by getting a victim to visit a
maliciously constructed URL. Users of vulnerable releases are
recommended to upgrade to this release.

Vulnerable versions:
* 1.5 preview series: n <= 1.5beta2 vulnerable, fixed in 1.5beta3
* 1.4 stable series: 1.4beta6 <= n <= 1.4.5 vulnerable, fixed in 1.4.6
* 1.3 legacy series: not vulnerable

This release also includes several bug fixes and localization updates.
See the changelog at the end of this file for a detailed list.


***** THIS IS ENOTIF/ECONFIRM *******

ENotif (EN) + EConfirm (EC) for REL1_5
(C) T. Gries 2004-2005 <mail@tgries.de>

Executive summary for the impatient reader:

* ENotif adds e-mail notification to MediaWiki and
  sends e-mails to watching users when a

    - watch-listed page or
    - user_talk page is changed or
    - a new page is created

  http://bugzilla.wikipedia.org/show_bug.cgi?id=454
  Visit the complete documentation on http://meta.wikipedia.org/Enotif

* EConfirm is a mechanism to sned a link to an unconfirmed e-mail
  address. The user needs to follow this link to confirm the e-mail
  address in the settings, the confirmation status always being
  shown there.

* Dozens of other bugzillas implemented,
  See http://meta.wikipedia.org/Enotif for the whole list.

  The current patch has only been checked for (see DefaultSettings.php):

  - php mail()
    ( = not using PEAR:Mail() module --- I do not know anyone who uses that)
    $wgSMTP = false;

  - MySQL database
    ( = not using PostgreSQL --- I do not know anyone who uses that)
    $wgDBtype = "mysql";
    $wgSearchType = "MyISAM";

* (bug 1932) '''Tracking''' ENotif/EConfirm & further enhancements (tracking)
* (bug 454) '''E-mail notification (EN)''' for page changes of watch-listed pages, user_talk page, and for new pages
* (bug 181) Assign lasting ID to latest revision of articles (OPEN)
* (bug 505) Specify timezones by location, to allow automatic adjustments (OPEN; TOUCHED HERE BY INTRODUCING $wgTimeCorrectionOverwrite)
* (bug 536) For pages on watchlist save last seen version number (OK)
* (bug 581) treat user_talk pages as every other "normal" page (OK)
* (bug 603) Delete + undelete cycle doesn't preserve old_id (OK in REL1_5)
* (bug 727) Number of watching users per page to be shown on recent changes view (OK)
* (bug 782) User option "show only the current revisions of pages" suppresses listing of all older revisions of pages in recent changes view (OK)
* (bug 804) create an LVR REPOSITORY for last-visited revisions until they are visited (OK)
* (bug 824) user preference page: do not show help for ''realname'' if "realname" field is disabled by sysop (OK)
* (bug 866) '''EConfirm (EC): e-mail address confirmation''' by sending a link comprising a token to the unconfirmed mailaddress (OK)
* (bug 907) UserMailer() function revision to allow for parameters in the form "name (..) <emailaddress>" (OK)
* (bug 952) table user got new columns user_email_confirmed, user_email_token, user_email_token_expires
* (bug 959) Email addresses need to be checked before storing in database to comply with [http://www.faqs.org/rfcs/rfc2822.html RFC-2822] '''(OPEN)'''
* (bug 1116) E-mail notification for page changes or new pages, where title or body or category matches a regular expression '''(OPEN)'''
* (bug 1125) FCKeditor 2.0 (WYSIWYG) editor integration (OK)
* (bug 1360) Auto-Login / Auto-Account creation v1.1 (OK)
* (bug 1363) Enotif Reset Nofication Flags does not work (OK)
* (bug 1370) ENotif mails are not automatically reenabled after sent when watching users visits watched and notified page (OK)
* (bug 1541) "mail me a new password" email has no FROM: (OK)
* (bug 1572) Add diff link to "You have new messages" (OK)
* (bug 1746) Subject of email-notifications must be quoted-printable. (OK)
* (bug 1805) new User() objects see undefined $wgContLang due to early call of loadfromsession() in Setup.php (OK)
* (bug 1831) request for 3 CVS HEAD changes (please fix) (OK)
* (bug 1855) waste through varchar in database (OK)
* (bug 1876) Show "You have new messages on your user or user_talk page" -- i.e. both pages are notified (OK)
* (bug 1891) Assign lasting ID to oldest (=first, =initial) revision of articles (OPEN)
* (bug 1895) Recent changes views show "(last seen)" -- for "difference to my last seen revision of that page" (OK)
* (bug 2014) ENotif code clean-up patch for REL1_5 (patchlet #1) (OK)
* (bug 2066) adding e-mail notification for _new_ pages to ENotif patch (patchlet #2) (OK)
* (bug 2105) Any mediawiki mail functions are potentially blocked by missing "space"in php mail() call in UserMailer::userMailer() (OK)
* (bug 2126) Unable to set new password after using emailed password (problem confirmed and found; will be fixed in Enotif > 3.25) (OK)
* (bug 2259) patch for User.php: login with temp.password also indicates that the e-mail address is valid (OK)
* (bug 2439) e-mail confirmation error message issues solved


<TODO> <FIXME>
* UserMailer.php: The Tim-Starling-improvement of having only one
  watchlist update database access is currently disabled.
  For this, I need to rework the comparison of enotif timestamps,
  which determines on which revisions the updated marker flag is shown
  (in Recent Changes and Page History views). With the TS-improvement,
  the (notification) time information is no longer exact for the single
  user.

v3.49
* maintenance release CVS update 200508172345

v3.48b
* (bug 3162) undefined variable and property in mediawiki fixed

v3.48a
* bug in UserMailer line 301 (fixed)
* new defaultsettings:
  $wgMaxCredits = 1

v3.48
* maintenance release CVS update 200508131900
* user- and user-talk pages were not automatically added to the
  watchlist, which also influenced the correct display of newmessage
  marker, when both pages had changes (solved)
* upgraded to final release of FCKeditor 2.0 http://www.fckeditor.net

v3.47
* maintenance release CVS update 200508112300
* undefined variable in SkinTemplate.php (solved)
* changed back some forgotten variable names $wgEmailConfirmation to
  $wgEmailAuthentication to get back in line with MediaWiki

v3.46
* maintenance release CVS update 200508110600
* email addresses of sysops, bureaucrats and developers are
  automatically authenticated as they are entered in user preferences
  (can be disabled, so that every address must be authenticated)
  (functionality was broken, is repaired now)
* updated marker was shown twice in enhanced recent changes view (solved)

v3.45a
* user option updated marker was ignored (solved)
* undefined variabled in UserMailer (solved)

v3.45
* maintenance release CVS update 200507152200
* fixed Martin's bugs in Parser.php w/ FCKeditor, SpecialRecentchanges.php
  with undefined wl_lastvisitedrevision for anons

v3.44
* maintenance release CVS update 200507142100
* SpecialUserlogin.php urlencodes now the username, when a temporary password
  is requested

v3.42
* maintenance release CVS update 200507130600
  (bug 2825) You have new messages" does not appear for anonymous users: solved
  other solution for this problem in Article.php

v3.41
* maintenance release CVS update 200507122145
  (bug 2825) You have new messages" does not appear for anonymous users: solved

v3.40
* (bug 2716) fixed SpecialPreferences Misc page underline option box not correctly shown
* maintenance release CVS update 200507112215

v3.39
* maintenance release CVS

v3.38
* bug fixed: toolbar missing on wiki editor text input form
  removed "&" in RecentChange.php (call_time_pass_reference)

v3.36
* (bug 1125) http://bugzilla.wikimedia.org/show_bug.cgi?id=1125
  using an external WYSIWYG Editor: FCKeditor
  from http://www.fckeditor.net
  Documentation http://meta.wikipedia.org/wiki/Fckeditor

v3.35
* maintenance release for MediaWiki 1.5 beta3
* fixed bug "green updatedmarker not shown on enhanced RC view"
* fixed bug "number of watching users shown twice on enhanced RC view"
* (bug 2716) fixed SpecialPreferences Misc page underline option box not correctly shown

v3.34
* SpecialRecentchanges.php needed to be changed for RCShowCurrentRevisionOnly
  and new database schema (rc_this_oldid = page_latest)
  Problem in Article.php fixed

v3.33
* maintenance release for MediaWiki 1.5 beta2

v3.32
* further improved translations (German languageDe.php)
* updated from CVS 05.07.2005 05:15 UTC
  CVS fixed i.a. watchlist problem; timestamp problem on signatures
* introduced a space in the tooltips; wfMsg() seems to use trim() now

v3.31
* further improved translations (German languageDe.php)
* correct two filenames in updaters.inc

v3.30
* updated from CVS - after the first 3 days of beta1
* some problems in watchlist modules have been patched in CVS
* edit conflict problem has been patched in CVS
* corrected some translation errors in the German translation
  for enotif messages

v3.29 for MediaWiki beta1 release
* re-changed database and variable names for E-mail confirmation
  These names have been always "authenticated" and so on, where the
  EnotifWiki has changed them to "confirmed" and so on, which was not
  so clerver, because it results in many CVS merging conflict due to
  only the different names.
* streamlined updaters.inc converts databases for EnotifWiki users
  of EnotifWiki versions up to 3.28; the database field names will
  be converted to be compatible with MediaWiki again, so that
  further updates are possible

v3.28
* (bug 2439) e-mail confirmation error message issues solved

v3.27
* The temporary password is now (again) valid forever,
  or until the user requests another on.
  Before, the temporary password was cleared when the user used it for login.
  This appeared to be reasonable, but prevents to use the temp-password,
  when the user really needs it to set up a new regular password, before
  he forgot the old regular one.

v3.26
* fixed: enotifs were sent to unconfirmed addresses
  added new switch $wgEmailNotificationForAnyChanges: any change is notified, notifications
  are not suppressed after having sent one on the first unseen change

v3.25
* (bug 505) Specify timezones by location, to allow automatic adjustments (OPEN; TOUCHED)
  added a switch $wgTimecorrectionOverwrite, which when set, overwrites any user settings
  with that value

v3.24
* tooltips reborn:
  tooltips are shown when hovering over certain links if user has
  enabled this in 'misc' preferences; the feature was present
  in release 1.4 but has been abandoned since then

v3.23
* fixed a problem in one other module in cvs
* fixed bug for new page notifications: two mails were sent in cases of
  a) pre-watched pagenames and b) initial edits of user/user_talk pages.

v3.22
* fixed a bug in UserMailer::userMailer() with '-f ' parameter
  for php mail()

v3.21
* Other enhancements/bugs:
* (bug 1805) new User() objects see undefined $wgContLang due to early call of loadfromsession() in Setup.php
* (bug 1360) Auto-Login / Auto-Account creation v1.1

v3.19
* added forgotten /maintenance/archives/patch-last-visited-revision.sql

v3.18
* no changes. Version and diff for CVS as of 02.05.2005

v3.17
* bug fixed that address was always confirmed immediately.

v3.11
* bug in Emailuser.php fixed, must use Database::TimestampNULL()

v3.10
* I18N: ENotif text messages translated for German LanguageDE.php

v3.09
* bug fix: in SpecialPreferences, check settings before storing in db
  (preventing form tampering)

v3.08
* new feature: e-mail notifications are sent when a new page is created.
  user option; a switch in DefaultSettings determines, whether the option
  is enabled for all or only enabled for Bureaucrats, Developers, Sysops.
  A database schema change is required:
  new field user_emailnotificationfornewpages is added to table user
  run yourwiki/maintenance/> php update.php

v3.07
* When moving a page (which is watched), the existing watch properties
  are taken into consideration for determining the watch properties
  of the target page:
  the subject and/or talk target pages are watched depending
  on the old watchlist entries regardless of the check box status
  "move talk page as well" !

v3.06
* Labels "(last)" changed to "(prev)"
* New meaning of "(last)" is "difference between this and last seen
  revision of this page"

v3.05 for REL1_4
* optimised program design
  all ENotif calls are moved to module RecentChange.php
  no tricks -- straightforward
* Writing to a user_talk or a USER page both triggers the
  "You have new messages" marker and - if enabled - sending an ENotif.
  This feature can be disabled globally.
* Both pages are automatically added to the watchlist of the user,
  if someone leaves a message on one
* When adding a watch to a page, the talk_page is also watched and
  vice versa (standard behaviour of mediawiki is unchanged), but
  new watchlist management in Special:Watchlist allows to remove
  watched pages and their talk pages independently.
  This feature can be disabled globally (compatibility)
* The "You have new messages" marker has got direct links to the
  _difference_ view between current and last seen revision
* database schema has changed;
  run php update.php or make a fresh installation
  The datatype for EN and EA timestamps has been changed from
  varchar(14) to datetime
* removed EA minor bug in SpecialPreferences:
  EA timestamp are now invalidated when user clears her password
* email addresses of sysops, bureaucrats and developers are
  automatically authenticated as they are entered in user preferences
  (can be disabled, so that every address must be authenticated)

Other features:

* added (lvrd) links:
  link for difference between current and last-visited revision
  in recent-changes view
* introducing tooltips for (diff) (hist) (cur) (last) and
  for updatedmarker
* All texts can be disabled by clearing the strings cur_tooltiptext etc.
  in LanguageXX.php
* User option to suppress the listing of older revisions of pages in
  recent changes view: show only the current revisions of pages

== Version Enotif+Eauthent (now: EConfirm) EN+EA v2.00/CVS, 14.12.2004 ==

- updaters.inc for compatibility with older mediawiki tables:
  the conversion script converts existing user_newtalk entries
  watchlist table entries
  (user_newtalk) id ==> (watchlist) NS_USER_TALK:namefromId(id) timestamp=1
- minor bug fixes:
  updated marker now correctly shown on watchlist page
  watching users number display with enhanced RC view + RCUseModStyle
- wfUrlencode() instead of rawurlencode() in enotif mails
- duplicate enotif code moved from UserTalkUpdate.php and
  merged into UserMailer.php and using usermailer() solely
- fixed an enotif mail text error for user names with spaces
- fixed missing part for suppressing watching user number

v1.36:
magic watchlist shows and counts now only the content page, notwithstanding
the content and talk page are stored separately in watchlist.
* bug fixed: rawurlencode for pagetitles in enotif mails
* bug fixed: link to userpages of anonymous user are correct now

* Enotif v1.34
 bugs fixed regarding missing $oldid parameter

* v1.33
* Details:
 Implements almost all enotif options as user preferences.
 These are only shown on the user preference page, if they are globally
 enabled by the corresponding admin option in DefaultSettings.php.
 Added admin feature to let enotifs appear to come from the page editor.
 This facilitates automatic mail sorting and anti-spam filtering; feature was
 originally proposed by Nick Triantos, thank you !
 Page editor's email address is however only shown, if this user enabled
 the option "reveal my email address" in user preferences. Otherwise,
 the enotifs appear to come from WikiAdmin as usual (tricky to program,
 but simply trust the algorithm. or look into UserMailer.php and
 UserTalkPage.php).

* Changes from previous enotif versions
* v1.31 is an improved version with many security and also cosmetic changes
 applied after two first reviews by Brion Vibber. v1.31 is basically the same as
 the older Enotif v1.30 and v1.22 versions.

 Added UseMod style for recent changes view so that only the most recent
 change of any page is listed. The (diff) and (hist) still allow to retrieve the
 older versions at users' discretion, but the RC view is much cleaner for
 trusted environments such as medium-size companies or family wikis.

* Enotif v1.30 redesign after review by Brion Vibber 25.10.2003

* v1.22 "updated (since my last visit)" also shown for users without stored
 email address in preferences, so that they can see, what watched pages
 have changed.
* show "updated (since my last visit)" markers in RC, history and watchlist
* Systemvariables to suppress updated marker in all views
* show number of watching users in RC and on bottom of articles in
 classic skin and in monobook skin
* Systemvariables in DefaultSettings.php to enable or disable features
* v1.21 now suppresses displaying the marker "updated (since my last visit)"
 in recent changes view for the older (already visited) versions of watched
 pages - i.e. page versions before the enotif was sent do not bear that
 marker any longer.
* enotif mails come with a link to the diff view between current and last
 visited version of the watching user.
*database structure is changed automatically when installing via the
 recommended way (starting index.php and re-using the old database name).
	run php /maintenance/update.php
 OR see /maintenance/archives/patch-email-notification.sql and apply the
 command
	ALTER TABLE  watchlist
	ADD (wl_notificationtimestamp varchar(14) binary NOT NULL default '0');
 manually to your database, which does not harm the non notification versions

*adding a page x to the watchlist does automatically add a watch
  for the accompanying talk_page talk:x and vice versa;

== MediaWiki 1.5 beta 2 ==

July 5, 2005

MediaWiki 1.5 beta 2 is a preview release of the new 1.5 release series.
While most exciting new bugs should have been ironed out at this point,
third-party wiki operators should probably not run this beta release
on a public site without closely following additional development.

Anyone who _has_ been running beta 1 is very very strongly advised to
upgrade to beta 2, as it fixes many bugs from the previous beta including
a couple of HTML and SQL injections.

This release should be followed by one or two release candidates and
a 1.5.0 final within the next few weeks.

Beta upgraders, note there are some minor database changes. For upgrades
from 1.4, see the file UPGRADE for details on significant database and
configuration file changes.

Beta 2 includes a preliminary command-line XML wiki dump importer tool,
maintenance/importDump.php, paired with maintenance/dumpBackup.php.
These use the same format as Special:Export and Special:Import, able
to package a wiki's entire page set independent of the backend database
and compression format.


== MediaWiki 1.5 beta 1 ==

June 26, 2005

MediaWiki 1.5 beta 1 is a preview release, pretty much feature complete,
of the new 1.5 release series. There are several known and likely a number
of unknown bugs; it is not recommended to use this release in a production
environment but would be recommended for testing in mind of an upcoming
deployment.

A number of significant changes have been made since the alpha releases,
including database changes and a reworking of the user permissions settings.
See the file UPGRADE for details of upgrading and changing your prior
configuration settings for the new system.



== MediaWiki 1.5 alpha 2 ==

June 3, 2005

MediaWiki 1.5 alpha 2 includes a lot of bug fixes, feature merges,
and a security update.

Incorrect handling of page template inclusions made it possible to
inject JavaScript code into HTML attributes, which could lead to
cross-site scripting attacks on a publicly editable wiki.

Vulnerable releases and fix:
* 1.5 prerelease: fixed in 1.5alpha2
* 1.4 stable series: fixed in 1.4.5
* 1.3 legacy series: fixed in 1.3.13
* 1.2 series no longer supported; upgrade to 1.4.5 strongly recommended


== MediaWiki 1.5 alpha 1 ==

May 3, 2005

This is a testing preview release, being put out mainly to aid testers in
finding installation bugs and other major problems. It is strongly recommended
NOT to run a live production web site on this alpha release.

**  WARNING: USE OF THIS ALPHA RELEASE MAY INFEST YOUR HOUSE WITH  **
**  TERMITES, ROT YOUR TEETH,  GROW HAIR ON YOUR PALMS, AND PASTE  **
**  INNUENDO  INTO  YOUR  C.V.  RIGHT  BEFORE  A  JOB  INTERVIEW!  **
**  DON'T SAY WE DIDN'T WARN YOU, MAN. WE TOTALLY DID RIGHT HERE.  **


=== Big changes ===

Schema:
  The core table schema has changed significantly. This should make better
  use of the database's cache and disk I/O, and make significantly speed up
  rename and delete operations on pages with very long edit histories.

  Unfortunately this does mean upgrading a wiki of size from 1.4 will require
  some downtime for the schema restructuring, but future storage backend
  changes should be able to integrate into the new system more easily.

Permalinks:
  The current revision of a page now has a permanent 'oldid' number assigned
  immediately, and the id numbers are now preserved across deletion/undeletion.
  A permanent reference to the current revision of a page is now just a matter
  of going to the 'history' tab and copying the first link in the list.

Page move log:
  Renames of pages are now recorded in Special:Log and the page history.
  A handy revert link is available from the log for sysops.

Editing diff:
  Ever lost track of what you'd done so far during an edit? A 'Show diff'
  button on the edit page now makes it easy to remember.

Uploads:
  It's now possible to specify the final filename of an upload distinct
  from the original filename on your disk.

  An image link for a missing file will now take you straight to the upload page.

  More metadata is pre-extracted from uploaded images, which will ease pressure
  on disk or NFS volumes used to store images. EXIF metadata is displayed on
  the image description page if PHP is configured with the necessary module.

User accounts:
  There are some changes to the user permissions system, with assignable
  groups. This is still somewhat in flux; do not rely on the present system
  that you see in this alpha to still be there.

E-mail:
  User-to-user e-mail can now be restricted to require a mail-back confirmation
  first to reduce potential for abuse with false addresses.

  Updates to user talk pages and watchlist entries can optionally send e-mail
  notifications.

External hooks:
  A somewhat experimental interface for hooking in an external editor
  application is included. This may not be on by default in final release,
  depending on support.

And...
  A bunch of stuff we forgot to mention.


=== What's gone? ===

Latin-1:
  Wikis must now be encoded in Unicode UTF-8; this has been the default for
  some time, but some languages could optionally be installed in Latin-1 mode.
  This is no longer supported.

MySQL 3.x:
  Some optimization hacks for MySQL 3.x have been removed as part of the schema
  clean-up (specifically, the inverse_timestamp fields). MediaWiki 1.5 should
  still run, but wikis of significant size should very seriously consider
  upgrading to a more modern release. MySQL 3.x support will probably be
  entirely dropped in the next major release later this year.

Special:Maintenance
  These tools were, ironically enough, not really maintained. This special
  page has been removed; insofar as some of its pieces were useful and haven't
  already been supplanted by other special pages they should be rewritten in
  an efficient and safe manner in the future.


=== What's still waiting? ===

These things should be fixed by the time 1.5.0 final is released:

Upgrade:
  Wikis in Latin-1 encoding are no longer supported; only Unicode UTF-8.
  A new option $wgLegacyEncoding is provided to allow on-the-fly recoding of
  old page text entries, but other metadata fields (titles, comments etc) need
  to be pre-converted. The upgrade process does not yet fully automate this.
  
  In general the upgrade from 1.4 to 1.5 schema has not been tested for all
  cases, and there may be problems.

Backups:
  The text entries of deleted pages are no longer removed from the main
  text table on deletion. If you provide public backup dumps of your databases,
  you will probably want to use the new XML-format dump generator... but
  this hasn't been finished yet.

PostgreSQL:
  The table definitions for PostgreSQL install are out of date, and patches
  to support PostgreSQL from the main installer are still pending.

MySQL 4.1+:
  Proper charset encoding / collation configuration for installs on MySQL 4.1
  and higher still needs to be fiddled with. Some bits may fail on the UTF-8
  setting due to some long field keys.

Authentication plugin fixes:
  The AuthPlugin interface needs some improvements to work better with LDAP,
  HTTP basic auth, and other such environments. Some patches are pending.


=== Smaller changes ===

Various bugfixes, small features, and a few experimental things:

* 'live preview' reduces preview reload burden on supported browsers
* support for external editors for files and wiki pages:
  http://meta.wikimedia.org/wiki/Help:External_editors
* Schema reworking: http://meta.wikimedia.org/wiki/Proposed_Database_Schema_Changes/October_2004
* (bug 15) Allow editors to view diff of their change before actually submitting an edit
* (bug 190) Hide your own edits on the watchlist
* (bug 510): Special:Randompage now works for other namespaces than NS_MAIN.
* (bug 1015) support for the full wikisyntax in <gallery> captions.
* (bug 1105) A "Destination filename" (save as) added to Special:Upload Upload.
* (bug 1352) Images on description pages now get thumbnailed regardless of whether the thumbnail is larger than the original.
* (bug 1662) A new magicword, {{CURRENTMONTHABBREV}} returns the abbreviation of the current month
* (bug 1668) 'Date format' supported for other languages than English, see:
  http://mail.wikipedia.org/pipermail/wikitech-l/2005-March/028364.html
* (bug 1739) A new magicword, {{REVISIONID}} give you the article or diff database
  revision id, useful for proper citation.
* (bug 1998) Updated the Russian translation.
* (bug 2064) Configurable JavaScript mimetype with $wgJsMimeType
* (bug 2084) Fixed a regular expression in includes/Title.php that was accepting invalid syntax like #REDIRECT [[foo] in redirects
* It's now possible to invert the namespace selection at Special:Allpages and Special:Contributions
* No longer using sorbs.net to check for open proxies by default.
* What was $wgDisableUploads is now $wgEnableUploads, and should be set to true if one wishes to enable uploads.
* Supplying a reason for a block is no longer mandatory
* Language conversion support for category pages
* $wgStyleSheetDirectory is no longer an alias for $wgStyleDirectory;
* Special:Movepage can now take paramaters like Special:Movepage/Page_to_move
  (used to just be able to take paramaters via a GET request like index.php?title=Special:Movepage&target=Page_to_move)
* (bug 2151) The delete summary now includes editor name, if only one has edited the article.
* (bug 2105) Fixed from argument to the PHP mail() function. A missing space could prevent sending mail with some versions of sendmail.
* (bug 2228) Updated the Slovak translation
* ...and more!


=== Changes since 1.5alpha1 ===

* (bug 73) Category sort key is set to file name when adding category to
  file description from upload page (previously it would be set to
  "Special:Upload", causing problems with category paging)
* (bug 419) The contents of the navigation toolbar are now editable through
  the MediaWiki namespace on the  MediaWiki:navbar page.
* (bug 498) The Views heading in MonoBook.php is now localizable
* (bug 898) The wiki can now do advanced sanity check on uploaded files
  including virus checks using external programs.
* (bug 1692) Fix margin on unwatch tab
* (bug 1906) Generalize project namespace for Latin localization, update namespaces
* (bug 1975) The name for Limburgish (li) changed from "Lèmburgs" to "Limburgs
* (bug 2019) Wrapped the output of Special:Version in <div dir='ltr'> in order
  to preserve the correct flow of text on RTL wikis.
* (bug 2067) Fixed crash on empty quoted HTML attribute
* (bug 2075) Corrected namespace definitions in Tamil localization
* (bug 2079) Removed links to Special:Maintenance from movepagetext message
* (bug 2094) Multiple use of a template produced wrong results in some cases
* (bug 2095) Triple-closing-bracket thing partly fixed
* (bug 2110) "noarticletext" should not display on Image page for "sharedupload" media
* (bug 2150) Fix tab indexes on edit form
* (bug 2152) Add missing bgcolor to attribute whitelist for <td> and <th>
* (bug 2176) Section edit 'show changes' button works correctly now
* (bug 2178) Use temp dir from environment in parser tests
* (bug 2217) Negative ISO years were incorrectly converted to BC notation
* (bug 2234) allow special chars in database passwords during install
* Deprecated the {{msg:template}} syntax for referring to templates, {{msg: is
  now the wikisyntax representation of wfMsgForContent()
* Fix for reading incorrectly re-gzipped HistoryBlob entries
* HistoryBlobStub: the last-used HistoryBlob is kept open to speed up
  multiple-revision pulls
* Add $wgLegacySchemaConversion update-time option to reduce amount of
  copying during the schema upgrade: creates HistoryBlobCurStub reference
  records in text instead of copying all the cur_text fields. Requires
  that the cur table be left in place until/unless such fields are migrated
  into the main text store.
* Special:Export now includes page, revision, and user id numbers by
  default (previously this was disabled for no particular reason)
* dumpBackup.php can dump the full database to Export XML, with current
  revisions only or complete histories.
* The group table was renamed to groups because "group" is a reserved word in
  SQL which caused some inconveniances.
* New fileicons for c, cpp, deb, dvi, exe, h, html, iso, java, mid, mov, o,
  ogg, pdf, ps, rm, rpm, tar, tex, ttf and txt files based on the KDE
  crystalsvg theme.
* Fixed a bug in Special:Newimages that made it impossible to search for '0'
* Added language variant support for Icelandic, now supports "Íslenzka"
* The #p-nav id in MonoBook is now #p-navigation
* Putting $4 in msg:userstatstext will now give the percentage of
  admnistrators out of normal users.
* links and brokenlinks tables merged to pagelinks; this will reduce pain
  dealing with moves and deletes of widely-linked pages.
* Add validate table and val_ip column through the updater.
* Simple rate limiter for edits and page moves; set $wgRateLimits
  (somewhat experimental; currently needs memcached)
* (bug 2262) Hide math preferences when TeX is not enabled
* (bug 2267) Don't generate thumbnail at the same size as the source image.
* Fix rebuildtextindex.inc for new schema
* Remove linkscc table code, no longer used.
* (bug 2271) Use faster text-only link replacement in image alt text
  instead of rerunning expensive link lookup and HTML generation.
* Only build the HTML attribute whitelist tree once.
* Replace wfMungeToUtf8 and do_html_entity_decode with a single function
  that does both numeric and named chars: Sanitizer::decodeCharReferences
* Removed some obsolete UTF-8 converter functions
* Fix function comment in debug dump of SQL statements
* (bug 2275) Update search index more or less right on page move
* (bug 2053) Move comment whitespace trimming from edit page to save;
  leaves the whitespace from the section comment there on preview.
* (bug 2274) Respect stub threshold in category page list
* (bug 2173) Fatal error when removing an article with an empty title from the watchlist
* Removed -f parameter from mail() usage, likely to cause failures and bounces.
* (bug 2130) Fixed interwiki links with fragments
* (bug 684) Accept an attribute parameter array on parser hook tags
* (bug 814) Integrate AuthPlugin changes to support Ryan Lane's external
  LDAP authentication plugin
* (bug 2034) Armor HTML attributes against template inclusion and links munging

=== Changes since 1.5alpha2 ===

* (bug 2319) Fix parse hook tag matching
* (bug 2329) Fix title formatting in several special pages
* (bug 2223) Add unique index on user_name field to prevent duplicate accounts
* (bug 1976) fix shared user database with a table prefix set
* (bug 2334) Accept null for attribs in wfElement without PHP warning
* (bug 2309) Allow templates and template parameters in HTML attribute zone,
  with proper validation checks. (regression from fix for 2304)
* Disallow close tags and enforce empty tags for <hr> and <br>
* Changed user_groups format quite a bit.
* (bug 2368) Avoid fatally breaking PHP 4.1.2 in a debug line
* (bug 2367) Insert correct redirect link record on page move
* (bug 2372) Fix rendering of empty-title inline interwiki links
* (bug 2384) Fix typo in regex for IP address checking
* (bug 650) Prominently link MySQL 4.1 help page in installer if a possible
  version conflict is detected
* (bug 2394) Undo incompatible breakage to {{msg:}} compatiblity includes
* (bug 1322) Use a shorter cl_sortkey field to avoid breaking on MySQL 4.1
  when the default charset is set to utf8
* (bug 2400) don't send confirmation mail on account creation if 
  $wgEmailAuthentication is false.
* (bug 2172) Fix problem with nowiki beeing replaced by marker strings
  when a template with a gallery was used.
* Guard Special:Userrights against form submission forgery
* (bug 2408) page_is_new was inverted (whoops!)
* Added wfMsgHtml() function for escaping messages and leaving params intact
* Fix ordering of Special:Listusers; fix groups list so it shows all groups
  when searching for a specific group and can't be split across pages
* (bug 1702) Display a handy upload link instead of a useless blank link
  for [[media:]] links to nonexistent files.
* (bug 873) Fix usage of createaccount permission; replaces $wgWhitelistAccount
* (bug 1805) Initialise $wgContLang before $wgUser
* (bug 2277) Added Friulian language file
* (bug 2457) The "Special page" href now links to the current special page
  rather than to "".
* (bug 1120) Updated the Czech translation
* A new magic word, {{SCRIPTPATH}}, returns $wgScriptPath
* A new magic word, {{SERVERNAME}}, returns $wgServerName
* A new magic word, {{NUMBEROFFILES}}, returns the number of rows in the image table
* Special:Imagelist displays titles with " " instead of "_"
* Less gratuitous munging of content sample in delete summary
* badaccess/badaccesstext to supercede sysop*, developer* messages
* Changed $wgGroupPermissions to more cut-n-paste-friendly format
* 'developer' group deprecated by default
* Special:Upload now uses 'upload' permission instead of hardcoding login check
* Add 'importupload' permission to disable direct uploads to Special:Import
* (bug 2459) Correct escaping in Special:Log prev/next links
* (bug 2462 etc) Taking out the experimental dash conversion; it broke too many
  things for the current parser to handle cleanly
* (bug 2467) Added a Turkish language file
* Fixed a bug in Special:Contributions that caused the namespace selection to
  be forgotten between submits
* Special:Watchlist/edit now has namespace subheadings
* (bug 1714) the "Save page" button now has right margin to seperate it from
  "Show preview" and "Show changes"
* Special:Statistics now supports action=raw, useful for bots designed to
  harwest e.g. article counts from multiple wikis.
* The copyright confirmation box at Special:Upload is now turned off by default
  and can be turned back on by setting $wgCopyrightAffirmation to a true value.
* Restored prior text for password reminder button and e-mail, replacing
  the factually inaccurate text that was there.
* (bug 2178) Fix temp dir check again
* (bug 2488) Format 'deletedtext' message as wikitext
* (bug 750) Keep line endings consistent in LocalSettings.php
* (bug 1577) Add 'printable version' tab in MonoBook for people who don't
  realize you can just hit print to get a nicely formatted printable page.
* Trim whitespace from option values to weather line-ending corruption problems
* Fixed a typo in the Romanian language file (NS_MESIA => NS_MEDIA)
* (bug 2504) Updated the Finnish translation
* (bug 2506, 2512) Updated the Nynorsk translation
* (bug 996) Replace $wgWhitelistEdit with 'edit' permission; fixup UPGRADE
  documentation about edit and read whitelists.
* (bug 2515) Fix incremental link table update
* Removed some wikipedia-specifica from LanguageXx.php's
* (bug 2496) Allow MediaWiki:edithelppage to point to external page
* Added a versionRequired() function to OutputPage, useful for extension
  writers that want to control what version of MediaWiki their extension
  can be used with.
* Serialized user objects now checked for versioning
* Fix for interwiki link regression
* Printable link shorter in monobook
* Experimental Latin-1-and-replication-friendly upgrader script
* (bug 2520) Don't show enotif options when disabled

== Changes since 1.5beta1 ==

* (bug 2531) Changed the interwiki name for sh (Serbocroatian) to
  Srpskohrvatski/Српскохрватски (was Српскохрватски (Srbskohrvatski))
* Nonzero return code for command-line scripts on wfDebugDieBacktrace()
* Conversion fix for empty old table in upgrade1_5.php
* Try reading revisions from master if no result on slave
* (bug 2538) Suppress notice on user serialized checks
* Fix paging on Special:Contributions
* (bug 2541) Fix unprotect tab
* (bug 1242) category list now show on edit page
* Skip sidebar entries where link text is '-'
* Convert non-UTF-8 URL parameters even if referer is local
* (bug 2460) <img> width & height properly filled when resizing image
* (bug 2273) deletion log comment used user interface langage
* Try reading revision _text_ from master if no result on slave
* Use content-language message cache for raw view of message pages
* (bug 2530) Not displaying talk pages on Special:Watchlist/edit
* Fixed a bug that would occour if $wgCapitalLinks was set to false, a user
  agent could create a username that began with a lower case letter that was
  not in the ASCII character set ( now user $wgContLang->ucfirst() instead of
  PHP ucfirst() )
* Moved the user name / password validity checking from
  LoginForm::addNewAccountInternal() to two new functions,
  User::isValidUserName() and User::isValidPassword(), extensions can now do
  these checks without rewriting code.
* Fix $wgSiteNotice when MediaWiki:Sitenotice is set to default '-'
* Fixed a bug where the watchlist count without talk pages would be off by a
  factor of two.
* upgrade1_5.php uses insert ignore, allows to skip image info initialization
* Fix namespaces in category list.
* Add rebuildImages.php to update image metadata fields
* Special:Ancientpages is expensive in new schema for now
* (bug 2568) Fixed a logic error in the Special:Statistics code which caused
  the displayed percentage of admins to be totally off.
* (bug 2560) Don't show blank width/height attributes for missing size
* Don't show bogus messages about watchlist notifications when disabled
* Don't show old debug messages in watchlist
* (bug 2576) Fix recording of transclusion links
* (bug 2577) Allow sysops to enter non-standard block times
* Fixed a bug where Special:Contributions wouldn't remember the 'invert'
  status between next/previous buttons.
* Move MonoBook printable link from tab to sidebar
* (bug 2567) Fix HTML escaping on category titles in list
* (bug 2562) Show rollback link for current revisions on diff pages
* (bug 2583) Add --missinig option on rebuildImages.php to add db entries
  for uploaded files that don't have them
* (bug 2572) Fix edit conflict handling
* (bug 2595) Show "Earlier" and "Latest" links on history go to the first/last
  page in the article history pager.
* Don't show empty-page text in 'Show changes' on new page
* (bug 2591) Check for end, fix limits on Whatlinkshere
* (bug 2584) Fix output of subcategory list
* (bug 2597) Don't crash when undeleting an image description page
* (bug 2564) Don't show "editingold" warning for recent revision
* Various code cleanup and HTML escaping fixlets
* Copy IRC-over-UDP update option from REL1_4
* (bug 2548) Keep summary on 'show changes' of section edit
* Move center on toc to title part to avoid breaking .toc style usage
* HTML sanitizer: correct multiple attributes by keeping last, not first
* (bug 2614) Fix section edit links on diff-to-current with oldid set
  Also fix navigation links on current-with-oldid view.
* (bug 2620) Return to prior behavior for some more things (such as
  subpage parent links) on current-diff view.
* (bug 2618) Fix regression from another fix; show initial preview for
  categories only if the page does not exist.
* (bug 2625) Keep group & user settings when paging in Listusers
* (bug 2627) Fix regression: diff radio button initial selection
* Copy fix for old search URLs with Lucene search plugin from REL1_4
* (bug 619) Don't use incompatible diff3 executable on non-Linux systems.
* (bug 2631) Fix Hebrew namespaces.
* (bug 2630) Indicate no-longer-valid cached entries in BrokenRedirects list
* (bug 2644, 2645) "cur" diff links in page history, watchlist and
  recentchanges should specify current ID explicitly.
* (bug 2609) Fix text justification preferenced with MonoBook skin.
* (bug 2594) Display article tab as red for non-existent articles.
* (bug 2656) Fix regression: prevent blocked users from reverting images
* (bug 2629) Automatically capitalize usernames again instead of
  rejecting lowercase with a useless error message
* (bug 2661) Fix link generation in contribs
* Add support for &preload=Page_name (load text of an existing page into
edit area) and &editintro=Page_name (load text of an existing page instead
of MediaWiki:Newpagetext) to &action=edit, if page is new.
* (bugs 2633, 2672, 2685, 2695) Fix Estonian, Portuguese, Italian, Finnish and
  Spanish numeric formatting
* Fixed Swedish numeric formatting
* (bug 2658) Fix signature time, localtime to match timezone offset again
* Files from shared repositories (e.g. commons) now display with their
  image description pages when viewed on local wikis.
* Restore compatibility namespace aliases for French Wikipedia
* Fix diff order on Enhanced RC 'changes' link
* (bug 2650) Fix national date type display on wikis that don't support
  dynamic date conversion.
* FiveUpgrade: large table hacks, install iw_trans update before links
* (bug 2648) Rename namespaces in Afrikaanse
* Special:Booksources checks if custom list page exists before using it
* (bug 1170) Fixed linktrail for da: and ru:
* (bug 2683) Really fix apostrophe escaping for toolbox tips
* (bug 923) Fix title and subtitle for rclinked special page
* (bug 2642) watchdetails message in several languages used  <a></a> instead of [ ]
* (bug 2181) basic CSB language localisation by Tomasz G. Sienicki (thanks for the patch)
* Fix correct use of escaping in edit toolbar bits
* Removed language conversion support from Icelandic
* (bug 2616) Fix proportional image scaling, giving correct height
* (bug 2640) Include width and height attributes on unscaled images
* Workaround for mysterious problem with bogus epoch If-Last-Modified reqs
* (bug 1109) Suppress compressed output on 304 responses
* (bug 2674) Include some site configuration info in export data:
  namespaces definitions, case-sensitivity, site name, version.
* Use xml:space="preserve" hint on export <text> elements
* Make language variant selection work again for zh

== Changes since 1.5beta2 ==

* Escaped & correctly in Special:Contributions
* (bug 2534) Hide edit sections with CSS to make right click to edit section work 
* (bug 2708) Avoid undefined notice on cookieless login attempt
* (bug 2188) Correct template namespace for Greek localization
* Fixed number formatting for Dutch
* (bug 1355) add class noprint to commonPrint.css
* (bug 2350) Massive update for Limburgish (li) language using Wikipédia
* Massive update for Arab (ar) language using Wikipédia
* (bug 1560) Massive update for Kurdish (ku) language using Wikipédia
* (bug 2709) Some messages were not read from database
* (bug 2416) Don't allow search engine robots to index or follow nonexisting articles
* Fix escaping in page move template.
* (bug 153) Discrepancy between thumbnail size and <img> height attribute

== Changes since 1.5beta3 ==

* Fix talk page move handling
* (bug 2721) New language file for Vietnamese with the Vietnamese number notation
* (bug 2749) &nbsp; would appear as a literal in image galleries for Cs, Fr, Fur, Pl and Sv
* (bug 787) external links being rendered when they only have one slash
* Fixed a missing typecast in Language::dateFormat() that would cause some
  interesting errors with signitures.
* (bug 2764) Number format for Nds
* (bug 1553) Stop forcing lowercase in Monobook skin for German language.
* (bug 1064) Implements Special:Unusedcategories
* (bug 2311) New language file for Macedonian
* Fix nohistory message on empty page history
* Fix fatal error in history when validation on
* Cleaned up email notification message formatting
* Finally fixed Special:Disambiguations that was broke since SCHEMA_WORK
* (bug 2761) fix capitalization of "i" in Turkish
* (bug 2789) memcached image metadata now cleared after deletion
* Add serialized version number to image metadata cache records
* (bug 2780) Fix thumbnail generation with GD for new image schema
* (bug 2791) Slovene numeric format
* (bug 655) Provide empty search form when searching for nothing
* Nynorsk numeric format fix
* (bug 2825) Fix regression in newtalk notifications for anons w/ enotif off
* (bug 2833) Fix bug in previous fix
* With $wgCapitalLinks off, accept off-by-first-letter-case in 'go' match
* Optional parameters for [[Special:Listusers]]
* (bug 2832) [[Special:Listadmins]] redirects to [[Special:Listusers/sysop]]
* (bug 785) Parser did not get out of <pre> with list elements
* Some shared upload fixes
* (bug 2768) section=new on nonexistent talk page does not add heading
* support preload= parameter for section=new
* show comment subject in preview when using section=new
* use comment form when creating a new talk page
* (bug 460) Properly handle <center> tags as a block.
* Undo inconsistent editing behavior change
* (bug 2835) Back out fix for bug 2802, caused regressions in category sort
* PHP 4.1.2 compatibility fix: define floatval() equivalent if missing
* (bug 2901) Number format for Catalan
* Special:Allpages performance hacks: index memcached caching, removed
  inverse checkbox, use friendlier relative offsets in index build
* Bring back "Chick" skin for mobile devices. It needs testing.
* Fix spelling of $wgForwardSearchUrl in DefaultSettings.php
* Specify USE INDEX on Allpages chunk queries, sometimes gets lost
  due to bogus optimization
* (bug 275) Section duplication fix
* Remove unused use of undefined variable in UserMailer
* Fix notice on search index update due to non-array
* (bug 2885) Fix fatal errors and notices in PHP 5.1.0beta3
* (bug 2931) Fix additional notices on reference use in PHP 4.4.0
* (bug 2774) Add three new $wgHooks to LogPage which enable extensions to add
  their own logtypes, see extensions/Renameuser/SpecialRenameuser.php for an
  example of this.
* (bug 740) Messages from extensions now appear in Special:Allmessages
* (bug 2857) fixed parsing of lists in <pre> sections
* (bug 796) Trackback support
* Fix 1.5 regression: weird, backwards diff links on new pages in enhanced RC
  are now suppressed as before.
* New skin: Simple
* "uselang" and "useskin" URL parameters can now be used in the URL when
  viewing a page, to change the language and skin of a page respectively.
* Skins can now be previewed in preferences
* (bug 2943) AuthPlugin::getCanonicalName() name canonicalization hook,
  patch from robla
* Wrap revision insert & page update in a transaction, rollback on late
  edit conflict.
* (bug 2953) 'other' didn't work in Special:Blockip when localized
* (bug 2958) Rollback and delete auto-summary should be in the project's
  content language
* Removed useless protectreason message
* Spelling fix: $wgUrlProtcols -> $wgUrlProtocols
* Switch Moldovan local name to cyrillic
* Fix typo in undefined array index access prevention
* (bug 2947) Update namespaces for sr localization
* (bug 2952) Added Asturian language file with translated namespaces
* (bug 2676) Apply a protective transformation on editing input/output
  for browsers that hit the Unicode blacklist. Patch by plugwash.
* (bug 2999) Fix encoding conversion of pl_title in upgrade1_5.php
* compressOld.php disabled, as it's known to be broken.


=== Changes since 1.5beta4 ===

* Fix Special:Allmessages under PHP 5
* (bug 2911) Special:Watchlist allowed only one type of limit at a time
* (bug 693) Special:Allmessages is excessively wide and redundant
* (bug 3001) Updated and applied live hack for recentchanges-based watchlist
* (bug 145) Finish 'exclude redirect' implementation in search form
* Rearranged Special:Movepage form to reduce confusion between destination
  title and reason input boxes
* (bug 2527) Always set destination filename when new file is selected
* (bug 3056) MySQL 3 compatibility fix: USE INDEX instead of FORCE INDEX
* PHP 4.1 compatibility fix: don't use new_link parameter to mysql_connect
  if running prior to 4.2.0 as it causes the call to fail
* (bug 3117) Fix display of upload size and type with tidy on
* (bug 1487) invalid html on empty list in banlist
* (bug 3017) Hotkey conflict for delete and show changes
* made pixel unit translateable and blocklistline now eats infiniteblock
  and expiringblock
* (bug 3092) Wrong numerical separator for big numbers in Serbian.
* (bug 2855) Credit for a uniq author showed its realname even with
  $wgAllowRealName=false.
* New special page: SpecialMostlinked
* (bug 2393) Fix MIME type for Atom feeds ( application/rss+atom )
* Fix display of read-only lockfile message
* Added a new hook, 'AddNewAccount', which is run after account creation
* Update all stats fields on recount.sql
* Include software-visible client IP address in Special:Version comment
  as a proxy debugging aid
* (bug 3162) Fix 'undefined property page_is_new' error on watchlist

=== Caveats ===

Some output, particularly involving user-supplied inline HTML, may not
produce 100% valid or well-formed XHTML output. Testers are welcome to
set $wgMimeType = "application/xhtml+xml"; to test for remaining problem
cases, but this is not recommended on live sites. (This must be set for
MathML to display properly in Mozilla.)


For notes on 1.4.x and older releases, see HISTORY.


=== Online documentation ===

Documentation for both end-users and site administrators is currently being
built up on Meta-Wikipedia, and is covered under the GNU Free Documentation
License:

  http://meta.wikipedia.org/wiki/Help:Contents


=== Mailing list ===

A MediaWiki-l mailing list has been set up distinct from the Wikipedia
wikitech-l list:

  http://mail.wikipedia.org/mailman/listinfo/mediawiki-l

A low-traffic announcements-only list is also available:
  http://mail.wikipedia.org/mailman/listinfo/mediawiki-announce

It's highly recommended that you sign up for one of these lists if you're
going to run a public MediaWiki, so you can be notified of security fixes.


=== IRC help ===

There's usually someone online in #mediawiki on irc.freenode.net
